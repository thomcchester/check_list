/*! thomas 2016-03-20 */
function taskSubmit(a){a.preventDefault();var b={};$.each($("#check-form").serializeArray(),function(a,c){b[c.name]=c.value}),b.Complete=!1,$.ajax({type:"POST",url:"/task",data:b,success:function(a){pullOld()}})}function pullOld(){console.log("has"),completedThings(),$.ajax({type:"GET",url:"/oldTask",success:function(a){oldInfo=a,postingOld(oldInfo),$(".changeToCompleted").on("click",changeToCompletedFunction),$(".changeToUncompleted").on("click",changeToUncompletedFunction),$(".sure").on("click",clearform)}})}function postingOld(a){for($(".oldDB").empty(),a.sort(function(a,b){return a.id>b.id}),i=0;i<a.length;i++)a[i].complete===!1&&$(".oldDB").append("<div><div class='container uncompleted'><p class='uncompleted'><span class='task'><span class='taskHead'>Task:</span> "+a[i].task+"</span>     <span class='description'><span class='taskHead'>Description:</span>    "+a[i].description+"    </span><button class='changeToCompleted "+i+" btn btn-secondary'>Completed!</button></p></div><br/></div>");for(i=0;i<a.length;i++)a[i].complete===!0&&$(".oldDB").append("<div><div class='container completed'><p class='completed'><span class='task'><span class='taskHead'>Task:</span> "+a[i].task+"</span>    <span class='description'><span class='taskHead'>Description:</span>   "+a[i].description+"    </span><button class='changeToUncompleted "+i+" btn btn-secondary'>oops do again</button></p></div><br/></div>")}function changeToCompletedFunction(){console.log("function starts");var a=$(this).attr("class").split(" ")[1],b=oldInfo[a];$.ajax({type:"POST",url:"/change_to_completed",data:b,success:function(a){pullOld()}})}function clearform(){$.ajax({type:"GET",url:"/clearform",success:function(a){pullOld()}}),$(".sure").css("display","none"),$(".clear").css("display","block")}function changeToUncompletedFunction(){var a=$(this).attr("class").split(" ")[1],b=oldInfo[a];$.ajax({type:"POST",url:"/change_to_uncompleted",data:b,success:function(a){pullOld()}})}function showSureButton(){$(".sure").css("display","block"),$(".clear").css("display","none")}function completedThings(){$(".counter").empty(),$.ajax({type:"GET",url:"/completeThings",success:function(a){$(".counter").append("<p class='count'> completed since last clear:  "+a[0].count+"</p>"),console.log("fish")}})}var oldInfo;$(document).ready(function(){$(".oldDB").empty(),pullOld(),$(".Task-Submit").on("click",taskSubmit),$(".clear").on("click",showSureButton)});